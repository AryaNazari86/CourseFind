<html lang="fa">

<head>
  <!-- Meta Tags -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>کورس فایند</title>
  <!-- Styles -->
  {% load static %}
  <!-- <link rel="stylesheet" href="{% static 'style/all.css' %}" /> -->
  <link rel="stylesheet" href="../static/style/all.css" />
  <link rel="stylesheet" href="../static/style/star-rating.css" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet/less" type="text/css" href="../static/style/range.less" />
</head>

<body dir="rtl">
  <!-- <div id="loaderContainer">
      <div id="loader"></div>
    </div> -->
  <form method="GET" action="{% url 'search' %}"></form>
  <header>
      <a href="{% url 'home' %}" class="logo-header">
        <img src="../media/Test_logo.jpeg" />
        <h1>کورس فایند</h1>
      </a>

    <form class="search-bar" method="GET" action="{% url 'search' %}">
      <input type="text" name="name" placeholder="جستجو کن..." spellcheck="false" />
      <button type="submit">
        <i class="ri-search-2-line"></i>
      </button>
    </form>
    <div id="filters-btn">
      <i class="ri-equalizer-line"></i>
      فیلتر ها
    </div>
  </header>
  <main>
    <div class="courses">

      {% for course in courses%}
      <table class="course">
        <tr>
          <td valign="top">
            <img src="{{course.image_url}}" class="course-image" />
            <div class="bottom">
              <h2 class="course-title">{{course.name}}</h2>
              <div class="provider-logo">
                <img src="../media/faradars-profile-picture.png" width="30" height="30" />
                <p>{{course.source.name}}</p>
              </div>
              {% if course.participants != -1 %}
              <div class="user-count">
                <i class="ri-group-fill"></i>
                <p>{{course.participants}} دانشجو</p>
              </div>
              {% endif %}
              
              <div class="rating">
                <i class="ri-star-fill"></i>
                <i class="ri-star-fill"></i>
                <i class="ri-star-fill"></i>
                <i class="ri-star-fill"></i>
                <i class="ri-star-half-fill"></i>
              </div>
            </div>
          </td>
        </tr>
        <tr>
          <td valign="top">
            <div class="footer">
              {% if course.price == 0 %}
              <p class="price">رایگان!</p>
              {% else %}
              <p class="price">{{course.price}} تومان</p>
              {% endif %}
              <button onclick="showCourseDetails('{% url 'course' %}')">جزییات</button>
            </div>
      </table>
      {% endfor %}
      </td>
      </tr>
      </table>

    </div>
  </main>
  <div class="page-popup" id="filters-popup">

    <div class="page-shadow"></div>
    <div class="page-group" id="filter-group">
      <button class="closeBtn" onclick="$('#filters-popup').fadeOut(100);">
        <i class="ri-close-line"></i>
      </button>
      <div class="filter-item">
        <div>ترتیب</div>
        <select name="order" id="order">
          <option value="participant-hl">تعداد دانشجو - زیاد به کم</option>
          <option value="participant-lh">تعداد دانشجو - کم به زیاد</option>
          <option value="price-hl">قیمت - زیاد به کم</option>
          <option value="price-lh">قیمت - کم به زیاد</option>
          <option value="rating-hl">امتیاز - زیاد به کم</option>
        </select>
      </div>
      <div class="filter-item">
        <div>حداکثر قیمت</div>
        <div id="maxPriceValue">۲۵۰۰۰۰۰</div>
        <input name="maxPrice" type="range" id="maxPrice" min="0" max="5000000" step="10000" value="2500000">
      </div>
      <div class="filter-item">
        <div>امتیاز</div>
        <input name="rating" class="star-rating" max="5" oninput="this.style.setProperty('--value', `${this.valueAsNumber}`)" step="0.5"
          style="--value:2.5" type="range" value="2.5">
      </div>
    </div>
  </div>
  <div class="page-popup" id="course-details-popup">

    <div class="page-shadow"></div>
    <div class="page-group" id="course-details-group">
      <button class="closeBtn" onclick="closeCourseDetails();">
        <i class="ri-close-line"></i>
      </button>
      <div>
        <iframe src="" id="course-iframe"></iframe>
      </div>

    </div>
  </div>

  </form>
  <!-- <script src="{% static '/script/resultPage.js' %}"></script> -->
  <script src="../static/script/less.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@persian-tools/persian-tools/build/persian-tools.umd.js"></script>
  <script src="../static/script/range.js"></script>
  <script src="../static/script/resultPage.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="/../static/script/resultPage.js"></script>

</body>

</html>